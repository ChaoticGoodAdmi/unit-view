<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" th:fragment="layout(links, scripts, content)">
<head>
    <meta charset="UTF-8">
    <title>Просмотр ДСЕ</title>
    <link href="http://cdn.jsdelivr.net/webjars/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" media="screen"/>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script>
    <th:block th:replace="${links}"/>
    <link th:href="@{/css/sidebar.css}" rel="stylesheet" media="screen"/>
</head>
<body>
<div class="wrapper">
    <div class="sidebar-sticky">
        <nav id="sidebar">
            <div class="sidebar-header">Просмотр гравировки</div>
            <ul class="list-unstyled components">
                <li>
                    <a th:href="@{/api/units/{id}/composition(id=${unit.id})}">Первичная входимость</a>
                </li>
                <li>
                    <a onclick="goBack()">Назад</a>
                </li>
                <li>
                    <a th:href="@{/api/units/all}">Список гравировок</a>
                </li>
            </ul>
        </nav>
    </div>
    <br>
    <div id="content">
        <div class="container" th:object="${unit}">
            <div id="unitCard" class="rounded border border-dark m-10 col-lg-12 w-100">
                <h2 class="big justify-content-between" id="unitTitle"
                    th:text="${unit.title} != null ? ${unit.title} : ${unit.description}">
                </h2>
                <span class="text-white pb-10 col-sm-3" id="unitDescription" th:if="${unit.title != null}"
                      th:text="*{description}"></span>
            </div>
            <br>
            <div class="container copy-btn mt-10">Артикул: <span id="art" th:text="*{article}"></span>
                <button type="button" class="btn btn-info"
                        onclick="copyToClipboard()">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-files" fill="currentColor"
                         xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                              d="M4 2h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H4z"/>
                        <path d="M6 0h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2v-1a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1H4a2 2 0 0 1 2-2z"/>
                    </svg>
                </button>
                <span id="copied-msg"></span>
            </div>
        </div>
        <br>
        <section class="content" th:replace="${content}">
            <p>Layout contents</p>
        </section>
    </div>
</div>
</body>
<th:block th:replace="${scripts}"/>
<script>
    function copyToClipboard() {
        const copyText = document.getElementById("art");
        const textArea = document.createElement("textarea");
        textArea.value = copyText.textContent;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand("Copy");
        textArea.remove();
        showCopiedMsg();
    }

    function goBack() {
        window.history.back();
    }

    function showCopiedMsg() {
        document.getElementById("copied-msg").innerHTML = "<span class='text-muted'>Скопировано!</span>"
        setTimeout(() => {
            document.getElementById("copied-msg").innerHTML = "";
        }, 2000);
    }
</script>
</html>